aspsms-t -----------------------------------------------------------------------

Check this site for the latest version of this software.
http://www.swissjabber.ch/index.php/Aspsms-t
http://github.com/micressor/aspsms-t


Overview -----------------------------------------------------------------------

aspsms-t is an open source jabber2sms transport, which 
allows you to send sms messages over the jabber network through the 
gateway-system of aspsms.com (https://www.aspsms.com). A lot of networks are 
supported.

Normal TextSMS messages usually costs 1 aspsms Credit. aspsms-t deliver very 
fast and will send you a jabber status message. A second message will receive,
if your sms was successfully delivered to the mobile device.

* It supports simple text SMS with a maximum of 160 characters. If your message 
  is >160 characters, aspsms-t will split it automatically in more than one 
  part.
* Support for Arabic and other oriental characters up to 87 characters each sms.
* Delivery notification for each sms with a unique transaction number
* It can set alphanumeric originator of every sms. This can be a mobile phone 
  or a short text with a maximum of 11 characters.


Requirements for Debian --------------------------------------------------------

apt-get install libnet-jabber-perl libnet-xmpp-perl libobject-multitype-perl \
  libauthen-sasl-perl libdigest-sha1-perl libxml-smart-perl \
  libxml-parser-perl libwww-perl liburi-perl libunicode-string-perl \
  wget libfile-pid-perl


Configuration with jabbed14 ----------------------------------------------------

1) Add the following lines to jabber.xml for jabberd14:

<service id='sms-linker'>
 <host>sms.domain.ch</host>
 <accept>
  <ip>127.0.0.1</ip>
  <port>5245</port>
  <secret>secret</secret>
  <timeout>30</timeout>
 </accept>
</service>

Restart your jabberd.

Configuration with ejabberd ----------------------------------------------------

vi ejabberd.cfg:
%% ASPSMS Transport
{5245, ejabberd_service, [
			{ip, {127, 0, 0, 1}},
			{access, all},
			{host, "aspsms.domain.tld", [{password, "secret"}]}
			]},


DNS configuration --------------------------------------------------------------

1. Add the SRV Record to the dns zone:

  _xmpp-server._tcp.aspsms.domain.ch. 900 IN SRV 1 1 5269 domain.ch.

2. Restart your nameserver.


aspsms-t configuration ---------------------------------------------------------

1. Copy ./etc/aspsms-t.xml.dist to /etc/aspsms-t.xml and configure it
2. (optional) Configuring the delivery notification agent 

Running directly from source ---------------------------------------------------

$ cd $ASPSMS_DIR
$ ./bin/aspsms-t -c /etc/aspsms-t.xml

aspsms-t web notification (optional) -------------------------------------------

1. Create a jabber account aspsms@domain.tld and update your aspsms-t.xml
   and aspsms-t.notify.xml in section <notification/>
2. Make aspsms-t.notify.pl available over an url for example like this:

$ cd /home/www/website
$ mkdir aspsms
$ mkdir aspsms/etc
$ cd aspsms
$ cp $SRC/aspsms-t.notify.pl .
$ cp $SRC/etc/aspsms-t.notify.xml.dist etc/aspsms-t.notify.xml
$ chmod 755 aspsms-t.notify.pl aspsms-t.notify.xml
$ vi ./etc/.htaccess
	order deny,allow
	deny from all
$ chmod 750 ./etc/.htaccess

3. Test your installation:

  http://www.domain.tld/aspsms/aspsms-t.notify.pl

Output:
<aspsms>
 <ident>aspsms-t</ident>
 <stream/>
 <reply>
  <status>No xml-stream found</status>
 </reply>
</aspsms>

means: Configuration is ok!
